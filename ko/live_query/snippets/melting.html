<!-- Creating Melt Requests -->
<article class="live-query">
	<header>
		멜팅 요청 만들기
	</header>
	<summary>
		여기에서는 사용자가 아이템을 파괴하고 생성시 들어간 엔진 코인을 회수할 때 멜팅 요청을 어떻게 만드는지 알아봅니다.
	</summary>
	<div>
		<p>
				이 방법은 엑세스 토큰이 주어지면, 클라우드 플랫폼에 아이템 멜팅 요청을 보내달라는 요청을 보냅니다. 발신자는 엔진 지갑에서 이 요청을 수락 또는 거부할 수 있는 
				옵션이 제공됩니다. 별도의 서비스에서 전송 요청을 수락하거나 거부하는 두번째 요소는 잠재적 악의적인 개발자, 서버 프록시 또는 손상된 시스템으로부터 보호하기 위한 보안 기능입니다.
		</p>

		<section class='example'>
			<p>
				클라우드 플랫폼에서 멜팅 요청을 작성하려면 발신자 ID에 대한 식별자, 멜팅이 되는 아이템 식별자, 멜팅이 될 아이템의 양을 지정해야합니다. 
				이 요청이 발신자의 지갑에 나타나고 승인되면 요청에 지정된 아이템이 녹고 잠겨 있던 엔진 코인이 해제됩니다. 이를 실행하기 위한 GraphQL 쿼리는 다음과 같습니다:
			</p>

			<p>
				클라우드 플랫폼에 호출할 때에는 작동할 특정 App을 지정해야 합니다. 이는 그러한 콜을 보여줍니다. 앱은 다음과 같은 헤더를 설정하여 지정됩니다:
			<pre>X-App-Id</pre>
			이 값은 사용할 앱 ID 입니다. “액세스 자격 증명 얻기” 호출에 대한 응답으로 받은 “app_id” 필드에서 잠재적 App 식별자를 찾을 수 있습니다.
			</p>

			<p>
				이 세션에서 사용중인 현재 App ID는 다음과 같습니다: <span class="app-id"></span><br/>
				앱을 전환하려면 위의 어플리케이션 탭에서 다른 앱을 선택한 다음 여기로 다시 이동하십시오.
			</p>

			<!--input id="appId" type='text' name='appId' placeholder='App ID'-->

			<pre><code class='query-display highlight language-text'>
mutation meltToken($identityId: Int!, $tokenId: String!, $value: Int!) {
  request: CreateEnjinRequest(type: MELT, identity_id: $identityId, melt_token_data: { token_id: $tokenId, value: $value }) {
    id
    encoded_data
    state
  }
}
              </code></pre>

			<p>
				‘Submit Query’ 버튼을 누르면 위에 있는 쿼리가 아래에 추가된 파라미터와 함께 클라우드 플랫폼 엔드 포인트에 POST됩니다:
			</p>

			<input class='parameter' type='text' name='identityId' placeholder='Sender Identity ID'>
			<br>
			<input class='parameter' type='text' name='tokenId' placeholder='Item ID'>
			<br>
			<input class='parameter' type='text' name='value' placeholder='Amount to Melt'>

			<pre><code class='parameter-display highlight language-javascript'>
{}
              </code></pre>

			<button class='submit-button'>Submit Query</button>

			<p>
					다음은 클라우드 플랫폼에 출력된 응답입니다:
			</p>

			<pre><code class='output-display highlight language-javascript'>
{
}
              </code></pre>

			<p>
					이 예제 쿼리에서는 발신자가 엔진 지갑을 사용하여 수락하거나 거부할 수 있는 멜팅 요청을 발행했습니다. Unity SDK에서 이를 실행하기 위한 GraphQL 호출은 
					<a
					href="doxygen/class_enjin_s_d_k_1_1_enjin.html#acb6c36db0dfc21261a27a1aba7f63d63" target="_blank">Enjin.MeltTokens(int
				userIdentityID, string itemID, int amount, System.Action&lt;RequestEvent&gt; callback)</a>입니다. 
					이 함수는 멜팅을 요청할때나 유저가 승인하는 것을 듣기 위해 콜백을 등록할때 이용됩니다. 이 콜백은 ‘지갑 연결하기’에서 나온 예와 유사한 방식으로 사용할 수 있습니다.
			</p>
		</section>
	</div>
</article>
